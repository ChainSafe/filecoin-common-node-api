{
  "openrpc": "1.3.2",
  "info": {
    "title": "common-node-api",
    "version": "0.0.0"
  },
  "methods": [
    {
      "name": "Filecoin.ChainGetTipSetAfterHeight",
      "description": "Looks back for a tipset at the specified epoch. If there are no blocks at the specified epoch, the first non-nil tipset at a later epoch will be returned. A fork can be specified, or null for the heaviest chain",
      "params": [
        {
          "name": "height",
          "required": true,
          "schema": {
            "type": "integer",
            "format": "int64"
          }
        },
        {
          "name": "tsk",
          "required": true,
          "schema": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "$ref": "#/components/schemas/Cid"
            }
          }
        }
      ],
      "result": {
        "name": "Filecoin.ChainGetTipSetAfterHeight::Result",
        "required": true,
        "schema": {
          "$ref": "#/components/schemas/Tipset"
        }
      },
      "paramStructure": "by-position"
    },
    {
      "name": "Filecoin.StateGetBeaconEntry",
      "description": "Returns the claim for a given address and claim ID",
      "params": [
        {
          "name": "epoch",
          "required": true,
          "schema": {
            "type": "integer",
            "format": "int64"
          }
        }
      ],
      "result": {
        "name": "Filecoin.StateGetBeaconEntry::Result",
        "required": true,
        "schema": {
          "$ref": "#/components/schemas/BeaconEntry"
        }
      },
      "paramStructure": "by-position"
    },
    {
      "name": "Filecoin.StateSectorPreCommitInfo",
      "description": "Returns the PreCommit info for the specified miner's sector. Returns null and no error if the sector isn't precommitted. Note that the sector number may be allocated while PreCommitInfo is nil. This means that either allocated sector numbers were compacted, and the sector number was marked as allocated in order to reduce size of the allocated sectors bitfield, or that the sector was precommitted, but the precommit has expired.",
      "params": [
        {
          "name": "miner_address",
          "required": true,
          "schema": {
            "$ref": "#/components/schemas/Address"
          }
        },
        {
          "name": "sector_number",
          "required": true,
          "schema": {
            "type": "integer",
            "format": "uint64",
            "minimum": 0.0
          }
        },
        {
          "name": "tipset_key",
          "required": true,
          "schema": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "$ref": "#/components/schemas/Cid"
            }
          }
        }
      ],
      "result": {
        "name": "Filecoin.StateSectorPreCommitInfo::Result",
        "required": false,
        "schema": {
          "anyOf": [
            {
              "$ref": "#/components/schemas/SectorPreCommitOnChainInfo"
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "paramStructure": "by-position"
    },
    {
      "name": "Filecoin.StateMinerAllocated",
      "description": "Returns info about sectors that a given miner is actively proving",
      "params": [
        {
          "name": "address",
          "required": true,
          "schema": {
            "$ref": "#/components/schemas/Address"
          }
        },
        {
          "name": "tipset_key",
          "required": true,
          "schema": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "$ref": "#/components/schemas/Cid"
            }
          }
        }
      ],
      "result": {
        "name": "Filecoin.StateMinerAllocated::Result",
        "required": true,
        "schema": {
          "$ref": "#/components/schemas/BitField"
        }
      },
      "paramStructure": "by-position"
    },
    {
      "name": "Filecoin.StateGetRandomnessDigestFromTickets",
      "description": "sample the chain for randomness",
      "params": [
        {
          "name": "rand_epoch",
          "required": true,
          "schema": {
            "type": "integer",
            "format": "int64"
          }
        },
        {
          "name": "tipset_key",
          "required": true,
          "schema": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "$ref": "#/components/schemas/Cid"
            }
          }
        }
      ],
      "result": {
        "name": "Filecoin.StateGetRandomnessDigestFromTickets::Result",
        "required": true,
        "schema": {
          "$ref": "#/components/schemas/Base64String"
        }
      },
      "paramStructure": "by-position"
    },
    {
      "name": "Filecoin.StateGetRandomnessDigestFromBeacon",
      "description": "samples the beacon for randomness",
      "params": [
        {
          "name": "rand_epoch",
          "required": true,
          "schema": {
            "type": "integer",
            "format": "int64"
          }
        },
        {
          "name": "tipset_key",
          "required": true,
          "schema": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "$ref": "#/components/schemas/Cid"
            }
          }
        }
      ],
      "result": {
        "name": "Filecoin.StateGetRandomnessDigestFromBeacon::Result",
        "required": true,
        "schema": {
          "$ref": "#/components/schemas/Base64String"
        }
      },
      "paramStructure": "by-position"
    },
    {
      "name": "Filecoin.StateWaitMsg",
      "description": "https://github.com/filecoin-project/lotus/blob/286fadaca4d2af81bedf4213daebfbbdbcd5e337/api/api_full.go#L448-L466",
      "params": [
        {
          "name": "message_cid",
          "required": true,
          "schema": {
            "$ref": "#/components/schemas/Cid"
          }
        },
        {
          "name": "confidence",
          "required": true,
          "schema": {
            "type": "integer",
            "format": "int64"
          }
        },
        {
          "name": "look_back_limit",
          "required": true,
          "schema": {
            "type": "integer",
            "format": "int64"
          }
        },
        {
          "name": "allow_replaced",
          "required": true,
          "schema": {
            "type": "boolean"
          }
        }
      ],
      "result": {
        "name": "Filecoin.StateWaitMsg::Result",
        "required": true,
        "schema": {
          "$ref": "#/components/schemas/MessageLookup"
        }
      },
      "paramStructure": "by-position"
    },
    {
      "name": "Filecoin.StateGetAllocationIdForPendingDeal",
      "description": "Identical to StateGetAllocationForPendingDeal except it returns the allocation ID",
      "params": [
        {
          "name": "deal_id",
          "required": true,
          "schema": {
            "type": "integer",
            "format": "uint64",
            "minimum": 0.0
          }
        },
        {
          "name": "tipset_key",
          "required": true,
          "schema": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "$ref": "#/components/schemas/Cid"
            }
          }
        }
      ],
      "result": {
        "name": "Filecoin.StateGetAllocationIdForPendingDeal::Result",
        "required": true,
        "schema": {
          "type": "integer",
          "format": "uint64",
          "minimum": 0.0
        }
      },
      "paramStructure": "by-position"
    },
    {
      "name": "Filecoin.StateGetAllocationForPendingDeal",
      "description": "Returns the allocation for the specified pending deal. Returns nil if pending allocation is not found.",
      "params": [
        {
          "name": "deal_id",
          "required": true,
          "schema": {
            "type": "integer",
            "format": "uint64",
            "minimum": 0.0
          }
        },
        {
          "name": "tipset_key",
          "required": true,
          "schema": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "$ref": "#/components/schemas/Cid"
            }
          }
        }
      ],
      "result": {
        "name": "Filecoin.StateGetAllocationForPendingDeal::Result",
        "required": false,
        "schema": {
          "anyOf": [
            {
              "$ref": "#/components/schemas/Allocation"
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "paramStructure": "by-position"
    },
    {
      "name": "Filecoin.StateLookupRobustAddress",
      "description": "Returns the public key address of the given ID address for non-account addresses (multisig, miners etc)",
      "params": [
        {
          "name": "address",
          "required": true,
          "schema": {
            "$ref": "#/components/schemas/Address"
          }
        },
        {
          "name": "tipset_key",
          "required": true,
          "schema": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "$ref": "#/components/schemas/Cid"
            }
          }
        }
      ],
      "result": {
        "name": "Filecoin.StateLookupRobustAddress::Result",
        "required": true,
        "schema": {
          "$ref": "#/components/schemas/Address"
        }
      },
      "paramStructure": "by-position"
    }
  ],
  "components": {
    "schemas": {
      "Address": {
        "type": "string"
      },
      "Allocation": {
        "type": "object",
        "required": [
          "Client",
          "Data",
          "Expiration",
          "Provider",
          "Size",
          "TermMax",
          "TermMin"
        ],
        "properties": {
          "Client": {
            "type": "integer",
            "format": "uint64",
            "minimum": 0.0
          },
          "Data": {
            "$ref": "#/components/schemas/Cid"
          },
          "Expiration": {
            "type": "integer",
            "format": "int64"
          },
          "Provider": {
            "type": "integer",
            "format": "uint64",
            "minimum": 0.0
          },
          "Size": {
            "type": "integer",
            "format": "uint64",
            "minimum": 0.0
          },
          "TermMax": {
            "type": "integer",
            "format": "int64"
          },
          "TermMin": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "Base64String": {
        "type": [
          "string",
          "null"
        ]
      },
      "BeaconEntry": {
        "type": "object",
        "required": [
          "Data",
          "Round"
        ],
        "properties": {
          "Data": {
            "$ref": "#/components/schemas/Base64String"
          },
          "Round": {
            "type": "integer",
            "format": "uint64",
            "minimum": 0.0
          }
        }
      },
      "BigInt": {
        "type": "string"
      },
      "BitField": {
        "type": [
          "array",
          "null"
        ],
        "items": {
          "type": "integer",
          "format": "uint8",
          "minimum": 0.0
        }
      },
      "BlockHeader": {
        "type": "object",
        "required": [
          "BeaconEntries",
          "ForkSignaling",
          "Height",
          "Messages",
          "Miner",
          "ParentBaseFee",
          "ParentMessageReceipts",
          "ParentStateRoot",
          "ParentWeight",
          "Parents",
          "Timestamp",
          "WinPoStProof"
        ],
        "properties": {
          "BLSAggregate": {
            "$ref": "#/components/schemas/Nullable_Signature"
          },
          "BeaconEntries": {
            "$ref": "#/components/schemas/Nullable_Array_of_BeaconEntry"
          },
          "BlockSig": {
            "$ref": "#/components/schemas/Nullable_Signature"
          },
          "ElectionProof": {
            "$ref": "#/components/schemas/Nullable_ElectionProof"
          },
          "ForkSignaling": {
            "type": "integer",
            "format": "uint64",
            "minimum": 0.0
          },
          "Height": {
            "type": "integer",
            "format": "int64"
          },
          "Messages": {
            "$ref": "#/components/schemas/Cid"
          },
          "Miner": {
            "$ref": "#/components/schemas/Address"
          },
          "ParentBaseFee": {
            "$ref": "#/components/schemas/BigInt"
          },
          "ParentMessageReceipts": {
            "$ref": "#/components/schemas/Cid"
          },
          "ParentStateRoot": {
            "$ref": "#/components/schemas/Cid"
          },
          "ParentWeight": {
            "$ref": "#/components/schemas/BigInt"
          },
          "Parents": {
            "$ref": "#/components/schemas/NonEmpty_Array_of_Cid"
          },
          "Ticket": {
            "$ref": "#/components/schemas/Nullable_Ticket"
          },
          "Timestamp": {
            "type": "integer",
            "format": "uint64",
            "minimum": 0.0
          },
          "WinPoStProof": {
            "$ref": "#/components/schemas/Nullable_Array_of_PoStProof"
          }
        }
      },
      "Cid": {
        "type": "object",
        "required": [
          "/"
        ],
        "properties": {
          "/": {
            "type": "string"
          }
        }
      },
      "ElectionProof": {
        "type": "object",
        "required": [
          "VRFProof",
          "WinCount"
        ],
        "properties": {
          "VRFProof": {
            "$ref": "#/components/schemas/Base64String"
          },
          "WinCount": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "MessageLookup": {
        "type": "object",
        "required": [
          "Height",
          "Message",
          "Receipt",
          "ReturnDec",
          "TipSet"
        ],
        "properties": {
          "Height": {
            "type": "integer",
            "format": "int64"
          },
          "Message": {
            "$ref": "#/components/schemas/Cid"
          },
          "Receipt": {
            "$ref": "#/components/schemas/Receipt"
          },
          "ReturnDec": true,
          "TipSet": {
            "$ref": "#/components/schemas/NonEmpty_Array_of_Cid"
          }
        }
      },
      "NonEmpty_Array_of_BlockHeader": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/BlockHeader"
        },
        "minItems": 1
      },
      "NonEmpty_Array_of_Cid": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/Cid"
        },
        "minItems": 1
      },
      "Nullable_Array_of_BeaconEntry": {
        "type": [
          "array",
          "null"
        ],
        "items": {
          "$ref": "#/components/schemas/BeaconEntry"
        }
      },
      "Nullable_Array_of_PoStProof": {
        "type": [
          "array",
          "null"
        ],
        "items": {
          "$ref": "#/components/schemas/PoStProof"
        }
      },
      "Nullable_Array_of_uint64": {
        "type": [
          "array",
          "null"
        ],
        "items": {
          "type": "integer",
          "format": "uint64",
          "minimum": 0.0
        }
      },
      "Nullable_Cid": {
        "anyOf": [
          {
            "$ref": "#/components/schemas/Cid"
          },
          {
            "type": "null"
          }
        ]
      },
      "Nullable_ElectionProof": {
        "anyOf": [
          {
            "$ref": "#/components/schemas/ElectionProof"
          },
          {
            "type": "null"
          }
        ]
      },
      "Nullable_Signature": {
        "anyOf": [
          {
            "$ref": "#/components/schemas/Signature"
          },
          {
            "type": "null"
          }
        ]
      },
      "Nullable_Ticket": {
        "anyOf": [
          {
            "$ref": "#/components/schemas/Ticket"
          },
          {
            "type": "null"
          }
        ]
      },
      "PoStProof": {
        "type": "object",
        "required": [
          "PoStProof",
          "ProofBytes"
        ],
        "properties": {
          "PoStProof": {
            "$ref": "#/components/schemas/int64"
          },
          "ProofBytes": {
            "$ref": "#/components/schemas/Base64String"
          }
        }
      },
      "Receipt": {
        "type": "object",
        "required": [
          "ExitCode",
          "GasUsed",
          "Return"
        ],
        "properties": {
          "EventsRoot": {
            "default": null,
            "$ref": "#/components/schemas/Nullable_Cid"
          },
          "ExitCode": {
            "type": "integer",
            "format": "uint32",
            "minimum": 0.0
          },
          "GasUsed": {
            "type": "integer",
            "format": "uint64",
            "minimum": 0.0
          },
          "Return": {
            "$ref": "#/components/schemas/Base64String"
          }
        }
      },
      "SectorPreCommitInfo": {
        "type": "object",
        "required": [
          "DealIDs",
          "Expiration",
          "SealProof",
          "SealRandEpoch",
          "SealedCID",
          "SectorNumber",
          "UnsealedCid"
        ],
        "properties": {
          "DealIDs": {
            "$ref": "#/components/schemas/Nullable_Array_of_uint64"
          },
          "Expiration": {
            "type": "integer",
            "format": "int64"
          },
          "SealProof": {
            "$ref": "#/components/schemas/int64"
          },
          "SealRandEpoch": {
            "type": "integer",
            "format": "int64"
          },
          "SealedCID": {
            "$ref": "#/components/schemas/Cid"
          },
          "SectorNumber": {
            "type": "integer",
            "format": "uint64",
            "minimum": 0.0
          },
          "UnsealedCid": {
            "$ref": "#/components/schemas/Nullable_Cid"
          }
        }
      },
      "SectorPreCommitOnChainInfo": {
        "type": "object",
        "required": [
          "Info",
          "PreCommitDeposit",
          "PreCommitEpoch"
        ],
        "properties": {
          "Info": {
            "$ref": "#/components/schemas/SectorPreCommitInfo"
          },
          "PreCommitDeposit": {
            "$ref": "#/components/schemas/BigInt"
          },
          "PreCommitEpoch": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "Signature": {
        "type": "object",
        "required": [
          "Data",
          "Type"
        ],
        "properties": {
          "Data": {
            "$ref": "#/components/schemas/Base64String"
          },
          "Type": {
            "$ref": "#/components/schemas/SignatureTypeLotusJson"
          }
        }
      },
      "SignatureType": {
        "description": "Signature variants for Filecoin signatures.",
        "type": "string",
        "enum": [
          "Secp256k1",
          "Bls",
          "Delegated"
        ]
      },
      "SignatureTypeLotusJson": {
        "anyOf": [
          {
            "type": "integer",
            "format": "uint8",
            "minimum": 0.0
          },
          {
            "$ref": "#/components/schemas/SignatureType"
          }
        ]
      },
      "Ticket": {
        "type": "object",
        "required": [
          "VRFProof"
        ],
        "properties": {
          "VRFProof": {
            "$ref": "#/components/schemas/Base64String"
          }
        }
      },
      "Tipset": {
        "$ref": "#/components/schemas/TipsetInner"
      },
      "TipsetInner": {
        "type": "object",
        "required": [
          "Blocks",
          "Cids",
          "Height"
        ],
        "properties": {
          "Blocks": {
            "$ref": "#/components/schemas/NonEmpty_Array_of_BlockHeader"
          },
          "Cids": {
            "$ref": "#/components/schemas/NonEmpty_Array_of_Cid"
          },
          "Height": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "int64": {
        "type": "integer",
        "format": "int64"
      }
    }
  }
}